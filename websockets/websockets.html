<html>
<head>
  <title>Web Sockets</title>
  <meta charset="UTF-8">

  <script src="http://www.google.com/jsapi"></script>
  <script>
    google.load('jquery','1.3.2');
  </script>

  <script src="web.js"></script>

  <script>
    var ws;

    var onData = function(evt) {
      $("#output").append("<p>" + evt.data);
    };

    var onOpen = function() {
      $("#connectionStatus").text("Connection opened");
      ws.send("I'm connected\n");
    };

    var onClose = function () { 
      $("#connectionStatus").text("Connection closed");
    };

    $(document).ready(function() {
      ws = createConnection(onOpen,onData,onClose);
    });
  </script>

</head>
<body>
  <h1>I'm calculating PI.</h1>

  <div id="output">
  </div>

  <div id="connectionStatus">
  </div>
</body>
</html>
